<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/monokai.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-background-image="question.svg"><h1>What can</h1><h1>be done?</h1></section>
				<section>
					<section>
						<h3>Introduction</h3>
						<ul>
							<li>
								Why? <br/>helped me, maybe helps others
							</li>
							<li class="fragment fade-in">
								For Who? <br/>Mostly Beginners
							</li>
							<li class="fragment fade-in">
								What? <br/> C++ on Bare Metal & some CMake
							</li>
						</ul>
					</section>

					<section>
						<h3>Disclaimer</h3>
						<ul>
							<li>Ideas are no army swiss knife</li>
							<li class="fragment fade-in">specific solutions of my worklife</li>
							<li class="fragment fade-in">therefore tools of this time & knowledge</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
                        <h3>easy, obvious start</h3>
                        <div class="fragment fade-in">optimize your variables & functions</div>
                        <div class="fragment fade-in">easiest way? const!</div>
					</section>
					<section>
                        <h3>Why const?</h3>
                        <ul>
                            <li class="fragment fade-in">
                                Code more readable
                            </li>
                            <li class="fragment fade-in">
                                helps compiler to optimize (smaller/ faster)
                            </li>
                            <li class="fragment fade-in">
                                prevents bugs
                            </li>
                            <li class="fragment fade-in">
                                feature exists since "forever" <br/>(no Excuse for not using it ðŸ˜‰)
                            </li>
                        </ul>
					</section>
					<section>
                        <h3>more readable/less potential bugs</h3>
                        <pre><code class="c++">void super_serious_function(const int & input_value) {
// input_value++;  // can't be changed
// [...] big magic happens here [...]
std::cout << input_value;
// [...] more unicorn code [...]
}</code></pre>
                        prevents modifying read only variables<br/>
                        <a href="https://godbolt.org/z/t-NyGb">GODBOLT</a>
					</section>
                    <section>
                        <h3>helping the compiler</h3>

                        <pre><code class="c++">const std::array values = {1,2,3,4,5,6,7,8,9,10,12,13,14,15};

int main() {
    std::cout << values[4];
    return 0;
}</code></pre>
                        Optimizer removes 60 bytes! (15 x 4 Bytes)<br/>
                        <a href="https://godbolt.org/z/tA2E_-">GODBOLT</a><br/>
                        Hint: std::array deduction since C++17
                    </section>
                    <section>
                        <h3>More detailed Talks</h3>
                        <ul>
                            <li>
                                <a href="https://youtu.be/n0Ak6xtVXno?t=2858">CppCon 2018: Kate Gregory <br/>- Simplicity: Not Just For Beginners</a> <br/>
                                Highlight: Const all the things [47:38 - 51:22]
                            </li>
                            <li>
                                <a href="https://youtu.be/zBkNBP00wJE?t=1616">CppCon 2016: Jason Turner <br/>- Rich Code for Tiny Computers: A Simple Commodore 64 Game in C++17</a> <br/>
                                Highlight: "add const" [26:56 - 28:23]
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h3>Better Optimization?</h3>
                        <ul>
                            <li class="fragment fade-in">
                                constexpr!
                            </li>
                            <li class="fragment fade-in">
                                Variable evaluation at compile <br/> IF POSSIBLE
                            </li>
                            <li class="fragment fade-in">
                                since C++11 for variables and 1 line Functions
                            </li>
                            <li class="fragment fade-in">
                                since C++14 for functions with more lines <br/>
                                often possible to add "constexpr" to function
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h3>More detailed Talks</h3>
                        <ul>
                            <li>
                                <a href="https://youtu.be/PJwd4JLYJJY">Ben Deane & Jason Turner <br/>- constexpr ALL the Things!</a>

                            </li>
                        </ul>
                    </section>
                    <section>
                        <h3>One Step further?</h3>
                        <ul>
                            <li class="fragment fade-in">
                                consteval!
                            </li>
                            <li class="fragment fade-in">
                                Value MUST evaluate at compile
                            </li>
                            <li class="fragment fade-in">
                                only for functions!
                            </li>
                            <li class="fragment fade-in">
                                added in C++20
                            </li>
                            <li class="fragment fade-in">
                                gives guarantees for our code
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h3>Advise</h3>
                        TODO nicer<br/>
                        nothing &lt; const &lt; constexpr &lt; consteval
                    </section>

				</section>
                <section>
                    <section>
                        <h3>Configurations</h3>
                        <ul>
                            <li class="fragment fade-in">Save Configurations in Files</li>
                            <li class="fragment fade-in">One File for all or One File per Configuration?</li>
                            <li class="fragment fade-in">it depends! <br/>For me:</li>
                            <li class="fragment fade-in">One File for all: <br/>if Configurations are small</li>
                            <li class="fragment fade-in">One File per Configuration: <br/>if Configurations are long </li>
                        </ul>

                    </section>
                    <section>
                        <h3>Example</h3>
                        <pre><code class="c++">struct first {
    constexpr static int device_ram_size = 1; };

struct middle {
    constexpr static int device_ram_size = 21; };

struct last {
    constexpr static int device_ram_size = 42; };

int main() {
    using this_config = last;
    std::cout << this_config::device_ram_size ;
    return 0;
};</code></pre>
                        <a href="https://godbolt.org/z/bXrPf3">GODBOLT</a>
                    </section>
                    <section>
                        <h3>Where could it be used?</h3>
                        <ul>
                            <li class="fragment fade-in">
                                Device-Address (I2C, IP[static or dynamic?])
                            </li>
                            <li class="fragment fade-in">
                                Server-Address (Gateway? static IP?)
                            </li>
                            <li class="fragment fade-in">
                                Devboard, Prototype, Final HW-Revision? (LED-Pins?)
                            </li>
                            <li class="fragment fade-in">
                                Branding?
                            </li>
                            <li class="fragment fade-in">
                                Watchdogtimer?
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h3>Story of a Sensor</h3>
                        <ul>
                            <li>
                                Connection
                            </li>
                            <li class="fragment fade-in">
                                Different Hardware
                            </li>
                            <li class="fragment fade-in">
                                Easy added User
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h3>Example CMAKE</h3>
                        <pre><code class="c++">SET( Environment_configs "first" "last" "middle")

# for each device/config-version create own target
foreach( current_Environment ${Environment_configs} )
    # create this specific target
    add_executable(Example_${current_Environment}.elf
                    main.cpp)
    # every target gets own definevalue
    target_compile_definitions(Example_${current_Environment}.elf
                    PUBLIC CONFIG_DEFINE=${current_Environment})
endforeach()</code></pre>
                    </section>
                    <section>
                        <h3>And why all this?</h3>
                        <img width="100%" data-src="clion_corner.png" alt="Down arrow">
                    </section>
                </section>
                <section>

                </section>
			</div>
		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true }
				]
			});
		</script>
	</body>
</html>
